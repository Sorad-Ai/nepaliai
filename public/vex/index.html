<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui, shrink-to-fit=no" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />


    <title>Vex X3M</title>

    <link rel="icon" type="image/png" href="assets/icon.png">
    <!-- For apple devices -->
    <link rel="apple-touch-icon" type="image/png" href="assets/icon.png" />
    <link rel="stylesheet" href="assets/css/app.css" type="text/css" />

    <script src="azerion-libs.min.js" defer onload="loadGame()"></script>







</head>

<body>

    <div id="content"> </div>
    <div id="loader">
        <div id="loaderR"></div>
    </div>
    <div id="orientation"></div>

    <script type="text/javascript">
        var gameName = "vex-x3m.min.js";


        //This all here is for cache busting;
        function addScript(src, buster, callback) {
            var s = document.createElement('script');
            s.setAttribute('src', src);
            if (typeof callback === 'function') {
                s.onload = callback;
            }
            document.body.appendChild(s);
        }

        function loadGame() {


            addScript('version.js', Date.now(), function() {

                addScript(gameName, Date.now(), function() {
                    new Game();
                });

            });


        }
    </script>


<script>
    // Function to focus the element by id 't' and trigger a specific key press
    function focusAndPressKey(keyCode, keyValue) {
      const gameElement = document.querySelector("body");
      if (gameElement) {
        gameElement.focus();
        const keyPressEvent = new KeyboardEvent("keydown", {
          key: keyValue,
          code: keyValue,
          keyCode: keyCode,
          which: keyCode,
          bubbles: true,
        });
        gameElement.dispatchEvent(keyPressEvent);
      }
    }

    // Listen for custom event from the parent window to trigger different key presses
    window.addEventListener("message", (event) => {
      switch (event.data) {
        case "Up":
          focusAndPressKey(38, "ArrowUp"); // Press 'ArrowUp' for Jump
          break;
        case "Right":
          focusAndPressKey(39, "ArrowRight"); // Press 'ArrowRight' for Right
          break;
        case "Left":
          focusAndPressKey(37, "ArrowLeft"); // Press 'ArrowLeft' for Left
          break;
        case "Down":
          focusAndPressKey(40, "ArrowDown"); // Press 'ArrowDown' for Down
          break;
        case "Pause":
          focusAndPressKey(27, "Escape"); // Press 'Escape' key
          break;
        case "Wow":
          focusAndPressKey(32, "Space");
        default:
          break;
      }
    });
  </script>


</body>

</html>