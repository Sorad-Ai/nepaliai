<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, shrink-to-fit=no" />


    <title>Extreme Bikers</title>


    <link rel="stylesheet" href="assets/css/app.css" type="text/css" />
</head>

<body>
    <div id="content"></div>
    <div id="loader">Loading ...</div>
    <div id="orientation"></div>
    <script type="text/javascript">
        var box2d = "box2d.js";
        var poly2tri = "poly2tri.min.js";

        var gameName = "extreme-bikers.min.js";


        //This all here is for cache busting;
        function addScript(src, buster, callback) {
            var s = document.createElement('script');
            s.setAttribute('src', src + '?v=' + buster);
            if (typeof callback === 'function') {
                s.onload = callback;
            }
            document.body.appendChild(s);
        }

        addScript('version.js', Date.now(), function() {
            addScript(gameName, version, function() {
                /**
                 * Here we create the game
                 */
                new BoilerPlate.Game();
            })
        })
    </script>

<script>
    // Function to focus the element by id 't' and trigger a specific key press
    function focusAndPressKey(keyCode, keyValue) {
      const gameElement = document.querySelector("body");
      if (gameElement) {
        gameElement.focus();
        const keyPressEvent = new KeyboardEvent("keydown", {
          key: keyValue,
          code: keyValue,
          keyCode: keyCode,
          which: keyCode,
          bubbles: true,
        });
        gameElement.dispatchEvent(keyPressEvent);
      }
    }

    // Listen for custom event from the parent window to trigger different key presses
    window.addEventListener("message", (event) => {
      switch (event.data) {
        case "Up":
          focusAndPressKey(38, "ArrowUp"); // Press 'ArrowUp' for Jump
          break;
        case "Right":
          focusAndPressKey(39, "ArrowRight"); // Press 'ArrowRight' for Right
          break;
        case "Left":
          focusAndPressKey(37, "ArrowLeft"); // Press 'ArrowLeft' for Left
          break;
        case "Down":
          focusAndPressKey(40, "ArrowDown"); // Press 'ArrowDown' for Down
          break;
        case "Pause":
          focusAndPressKey(27, "Escape"); // Press 'Escape' key
          break;
        case "Wow":
          focusAndPressKey(32, "Space");
        default:
          break;
      }
    });
  </script>

</body>

</html>